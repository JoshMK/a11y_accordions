!function(t,e,a){"use strict";var r={};t.ARIAaccordion=r,r.NS="ARIAaccordion",r.AUTHOR="Scott O'Hara",r.VERSION="2.0.0",r.LICENSE="https://github.com/scottaohara/accessible-components/blob/master/LICENSE.md";var i="accordion__trigger",n="accordion__heading",l="accordion__panel";r.create=function(){var t,a,o,s,u,d,c,g="none",A=e.querySelectorAll("[data-aria-accordion]");for(c=0;c<A.length;c++){var b;if(t=A[c],t.hasAttribute("id")||(t.id="acc_"+Math.floor(999*Math.random())+1),a=e.querySelectorAll("#"+t.id+" > ."+l),o=e.querySelectorAll("#"+t.id+" > ."+n),t.hasAttribute("data-default")&&(g=t.getAttribute("data-default")),u=t.hasAttribute("data-constant"),d=t.hasAttribute("data-multi"),t.hasAttribute("data-transition")){var f=t.querySelectorAll("."+l);for(b=0;b<f.length;b++)f[b].setAttribute("style","transition: "+t.getAttribute("data-transition")+"s ease-in-out")}for(r.setupPanels(t.id,a,g,u),r.setupHeadingButton(o,u),s=e.querySelectorAll("#"+t.id+" > ."+n+" ."+i),b=0;b<s.length;b++)s[b].addEventListener("click",r.actions),s[b].addEventListener("keydown",r.keytrolls)}},r.setupPanels=function(t,e,a,r){var i,n,l,s,u;for(i=0;i<e.length;i++)n=e[i],l=t+"_panel_"+(i+1),s=a,u=r,n.setAttribute("id",l),o(e[0],!0),"none"!==s&&isNaN(s)&&(1>=s?o(e[0],!1):s-1>=e.length?o(e[e.length-1],!1):o(e[s-1],!1)),(u&&"none"===s||isNaN(s))&&o(e[0],!1)},r.setupHeadingButton=function(t,a){var r,n,l,o,u,c;for(c=0;c<t.length;c++)r=t[c],n=r.nextElementSibling.id,l=e.getElementById(n).getAttribute("aria-hidden"),o=e.createElement("button"),u=r.textContent,r.innerHTML="",o.setAttribute("type","button"),o.setAttribute("aria-controls",n),o.setAttribute("id",n+"_trigger"),o.classList.add(i),"false"===l?(s(o,!0),d(o,!0),a&&o.setAttribute("aria-disabled","true")):(s(o,!1),d(o,!1)),r.appendChild(o),o.appendChild(e.createTextNode(u))},r.actions=function(t){var a=this.id.replace(/_panel.*$/g,""),l=e.getElementById(this.getAttribute("aria-controls")),o=e.querySelectorAll("#"+a+" > ."+n+" ."+i);t.preventDefault(),r.togglePanel(t,a,l,o)},r.togglePanel=function(t,a,r,i){var n,l,c=t.target;if("true"!==c.getAttribute("aria-disabled")&&(l=c.getAttribute("aria-controls"),d(c,"true"),"true"===c.getAttribute("aria-expanded")?(s(c,"false"),o(r,"true")):(s(c,"true"),o(r,"false"),e.getElementById(a).hasAttribute("data-constant")&&u(c,"true")),e.getElementById(a).hasAttribute("data-constant")||!e.getElementById(a).hasAttribute("data-multi")))for(n=0;n<i.length;n++)c!==i[n]&&(d(i[n],"false"),l=i[n].getAttribute("aria-controls"),u(i[n],"false"),s(i[n],"false"),o(e.getElementById(l),"true"))},r.keytrolls=function(t){if(t.target.classList.contains(i)){var a=t.keyCode||t.which,r=36,l=35,o=this.id.replace(/_panel.*$/g,""),s=e.querySelectorAll("#"+o+" > ."+n+" ."+i);switch(a){case l:t.preventDefault(),s[s.length-1].focus();break;case r:t.preventDefault(),s[0].focus()}}},r.init=function(){r.create()};var o=function(t,e){t.setAttribute("aria-hidden",e)},s=function(t,e){t.setAttribute("aria-expanded",e)},u=function(t,e){t.setAttribute("aria-disabled",e)},d=function(t,e){t.setAttribute("data-current",e)};r.init()}(window,document);
